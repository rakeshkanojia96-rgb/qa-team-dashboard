<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QA Team Performance Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2">
            <!-- Simplified header -->
        </div>
    </header>

    <div id="auth-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 id="auth-modal-title" class="text-2xl font-bold text-gray-900">Login</h3>
                <button onclick="closeAuthModal()" class="text-gray-400 hover:text-gray-600">
                    <i data-lucide="x" width="24" height="24"></i>
                </button>
            </div>
            <form id="auth-form" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                    <input type="email" id="auth-email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                    <input type="password" id="auth-password" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                </div>
                <button type="submit" id="auth-submit-btn" class="btn-primary w-full">Login</button>
            </form>
            <div class="mt-4 text-sm text-gray-600 text-center" style="display: none;">
                <span id="auth-toggle-text">Donâ€™t have an account?</span>
                <button type="button" id="auth-toggle-btn" onclick="toggleAuthMode()" class="text-indigo-600 hover:text-indigo-800 font-medium ml-1">Sign up</button>
            </div>
            <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                <p class="text-sm text-blue-800">
                    <i data-lucide="info" width="16" height="16" class="inline mr-1"></i>
                    Viewer accounts are read-only. Ask admin to upgrade you to Editor.
                </p>
            </div>
        </div>
    </div>

    <!-- Login Required Overlay -->
    <div id="login-gate" class="fixed inset-0 bg-gradient-to-br from-indigo-600 via-purple-600 to-blue-600 flex items-center justify-center z-40 hidden overflow-y-auto p-4">
        <div class="bg-white rounded-2xl p-8 md:p-12 max-w-4xl w-full shadow-2xl my-8">
            <!-- Header -->
            <div class="text-center mb-8">
                <div class="mb-4">
                    <i data-lucide="shield-check" class="mx-auto text-indigo-600" width="72" height="72"></i>
                </div>
                <h1 class="text-4xl font-bold text-gray-900 mb-3">QA Team Performance Dashboard</h1>
                <p class="text-lg text-gray-600">Comprehensive Quality Assurance Team Management & Analytics Platform</p>
            </div>

            <!-- Features Grid -->
            <div class="grid md:grid-cols-2 gap-6 mb-8">
                <div class="bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-6 border border-purple-100">
                    <div class="flex items-start space-x-4">
                        <div class="bg-purple-100 rounded-lg p-3">
                            <i data-lucide="users" class="text-purple-600" width="24" height="24"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 mb-2">Team Management</h3>
                            <p class="text-sm text-gray-600">Manage QA team members with detailed profiles and role assignments</p>
                        </div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl p-6 border border-blue-100">
                    <div class="flex items-start space-x-4">
                        <div class="bg-blue-100 rounded-lg p-3">
                            <i data-lucide="trending-up" class="text-blue-600" width="24" height="24"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 mb-2">Performance Metrics</h3>
                            <p class="text-sm text-gray-600">Track test cases, defects, and execution rates by project and period</p>
                        </div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border border-green-100">
                    <div class="flex items-start space-x-4">
                        <div class="bg-green-100 rounded-lg p-3">
                            <i data-lucide="calendar-check" class="text-green-600" width="24" height="24"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 mb-2">Attendance Tracking</h3>
                            <p class="text-sm text-gray-600">Monitor team attendance with calendar views and statistical insights</p>
                        </div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-amber-50 to-orange-50 rounded-xl p-6 border border-amber-100">
                    <div class="flex items-start space-x-4">
                        <div class="bg-amber-100 rounded-lg p-3">
                            <i data-lucide="star" class="text-amber-600" width="24" height="24"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 mb-2">Appraisal System</h3>
                            <p class="text-sm text-gray-600">Set goals and rate team members for performance reviews</p>
                        </div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-rose-50 to-pink-50 rounded-xl p-6 border border-rose-100">
                    <div class="flex items-start space-x-4">
                        <div class="bg-rose-100 rounded-lg p-3">
                            <i data-lucide="bar-chart-3" class="text-rose-600" width="24" height="24"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 mb-2">Advanced Analytics</h3>
                            <p class="text-sm text-gray-600">Visual charts and trends for data-driven decision making</p>
                        </div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-violet-50 to-purple-50 rounded-xl p-6 border border-violet-100">
                    <div class="flex items-start space-x-4">
                        <div class="bg-violet-100 rounded-lg p-3">
                            <i data-lucide="cloud" class="text-violet-600" width="24" height="24"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 mb-2">Cloud Sync</h3>
                            <p class="text-sm text-gray-600">Secure cloud storage with automatic data synchronization</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CTA -->
            <div class="text-center">
                <button onclick="openAuthModal()" class="btn-primary text-lg py-4 px-8 shadow-lg hover:shadow-xl transition-shadow">
                    <i data-lucide="log-in" width="20" height="20" class="inline mr-2"></i>
                    Login to Access Dashboard
                </button>
                <p class="text-sm text-gray-500 mt-4">Don't have an account? Sign up when you click Login</p>
                <div class="mt-6 pt-6 border-t border-gray-200">
                    <p class="text-xs text-gray-500">ðŸ”’ Secure authentication â€¢ Role-based access â€¢ Real-time updates</p>
                </div>
            </div>
        </div>
    </div>

    <div id="app-container" class="flex h-screen">
        <!-- Sidebar Navigation -->
        <aside class="w-64 bg-white shadow-sm border-r border-gray-200 flex flex-col relative">
            <!-- Dashboard Title -->
            <div class="p-3 border-b border-gray-200">
                <div class="flex items-center space-x-2 mb-1">
                    <i data-lucide="shield-check" class="text-indigo-600" width="20" height="20"></i>
                    <h1 class="text-sm font-bold text-gray-900">QA Performance</h1>
                </div>
                <p class="text-xs text-gray-500">Track & Improve Team Performance</p>
            </div>
            
            <nav class="p-2.5 space-y-0 overflow-y-auto" style="max-height: calc(100vh - 200px);">
                <div class="nav-item active flex items-center space-x-2 px-3 py-2 rounded-lg" onclick="showSection('dashboard')">
                    <i data-lucide="layout-dashboard" width="18" height="18"></i>
                    <span class="font-medium text-sm">Dashboard</span>
                </div>
                <div class="nav-item flex items-center space-x-2 px-3 py-2 rounded-lg" onclick="showSection('team-members')">
                    <i data-lucide="users" width="18" height="18"></i>
                    <span class="font-medium text-sm">Team Members</span>
                </div>
                <div class="nav-item flex items-center space-x-2 px-3 py-2 rounded-lg" onclick="showSection('performance')">
                    <i data-lucide="trending-up" width="18" height="18"></i>
                    <span class="font-medium text-sm">Performance</span>
                </div>
                <div class="nav-item flex items-center space-x-2 px-3 py-2 rounded-lg" onclick="showSection('attendance')">
                    <i data-lucide="calendar-check" width="18" height="18"></i>
                    <span class="font-medium text-sm">Attendance</span>
                </div>
                <div class="nav-item flex items-center space-x-2 px-3 py-2 rounded-lg" onclick="showSection('holidays')">
                    <i data-lucide="calendar-x" width="18" height="18"></i>
                    <span class="font-medium text-sm">Holidays</span>
                </div>
                <div class="nav-item flex items-center space-x-2 px-3 py-2 rounded-lg" onclick="showSection('appraisal')">
                    <i data-lucide="star" width="18" height="18"></i>
                    <span class="font-medium text-sm">Appraisal</span>
                </div>
                <div class="nav-item flex items-center space-x-2 px-3 py-2 rounded-lg" onclick="showSection('analytics')">
                    <i data-lucide="bar-chart-3" width="18" height="18"></i>
                    <span class="font-medium text-sm">Analytics</span>
                </div>
                
                <!-- Divider -->
                <div class="border-t border-gray-200 my-1.5"></div>
                
                <!-- Data Management -->
                <p class="text-xs font-semibold text-gray-400 uppercase tracking-wider px-3 mt-2 mb-1">Data</p>
                <button onclick="showExportMenu()" class="w-full flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors text-left">
                    <i data-lucide="download" width="18" height="18" class="text-gray-600"></i>
                    <span class="font-medium text-sm text-gray-700">Export</span>
                </button>
                <button onclick="showImportMenu()" class="w-full flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors text-left">
                    <i data-lucide="upload" width="18" height="18" class="text-gray-600"></i>
                    <span class="font-medium text-sm text-gray-700">Import</span>
                </button>
                <button onclick="showTemplateMenu()" class="w-full flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors text-left">
                    <i data-lucide="file-text" width="18" height="18" class="text-gray-600"></i>
                    <span class="font-medium text-sm text-gray-700">Templates</span>
                </button>
            </nav>
            
            <!-- Auth Section (Fixed at Bottom) -->
            <div class="absolute bottom-0 left-0 right-0 border-t border-gray-200 px-3 py-3 bg-gray-50">
                <div class="mb-2">
                    <div id="sidebar-auth-status" class="text-xs text-gray-500 mb-1">Not logged in</div>
                    <div id="sidebar-auth-email" class="text-sm font-medium text-gray-700 truncate hidden"></div>
                    <span id="sidebar-auth-role" class="hidden text-xs px-2 py-0.5 rounded bg-indigo-100 text-indigo-700 inline-block mt-1"></span>
                </div>
                <button id="sidebar-login-btn" onclick="openAuthModal()" class="w-full btn-secondary text-sm py-2 flex items-center justify-center space-x-2">
                    <i data-lucide="log-in" width="16" height="16"></i>
                    <span>Login</span>
                </button>
                <button id="sidebar-logout-btn" onclick="logout()" class="w-full btn-secondary text-sm py-2 hidden flex items-center justify-center space-x-2">
                    <i data-lucide="log-out" width="16" height="16"></i>
                    <span>Logout</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto p-8">
            <!-- Dashboard Section -->
            <div id="dashboard-section" class="section">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold text-gray-900">Team Overview</h2>
                    
                    <!-- Date Filter -->
                    <div class="flex items-center space-x-4 bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                        <div class="flex items-center space-x-2">
                            <i data-lucide="calendar" width="20" height="20" class="text-gray-600"></i>
                            <label class="text-sm font-medium text-gray-700">Date Range:</label>
                        </div>
                        <select id="dashboard-date-preset" onchange="applyDashboardDateFilter()" class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500">
                            <option value="all">All Time</option>
                            <option value="7">Last 7 Days</option>
                            <option value="30" selected>Last 30 Days</option>
                            <option value="90">Last 90 Days</option>
                            <option value="180">Last 6 Months</option>
                            <option value="365">Last Year</option>
                            <option value="custom">Custom Range</option>
                        </select>
                        <div id="dashboard-custom-dates" class="items-center space-x-2" style="display: none;">
                            <input type="date" id="dashboard-date-from" class="px-3 py-2 border border-gray-300 rounded-lg text-sm" onchange="applyDashboardDateFilter()">
                            <span class="text-gray-500">to</span>
                            <input type="date" id="dashboard-date-to" class="px-3 py-2 border border-gray-300 rounded-lg text-sm" onchange="applyDashboardDateFilter()">
                        </div>
                        <button onclick="clearDashboardDateFilter()" class="text-sm text-gray-600 hover:text-gray-900 px-3 py-2 hover:bg-gray-100 rounded-lg">
                            <i data-lucide="x" width="16" height="16" class="inline"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="card stat-card p-6">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <p class="text-white/80 text-sm font-medium">Total Team Members</p>
                                <h3 class="text-3xl font-bold mt-2" id="total-members">0</h3>
                            </div>
                            <i data-lucide="users" width="32" height="32" class="text-white/60"></i>
                        </div>
                    </div>
                    
                    <div class="card stat-card-green p-6">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <p class="text-white/80 text-sm font-medium">Tests Executed (Month)</p>
                                <h3 class="text-3xl font-bold mt-2" id="total-tests">0</h3>
                            </div>
                            <i data-lucide="check-circle" width="32" height="32" class="text-white/60"></i>
                        </div>
                    </div>
                    
                    <div class="card stat-card-orange p-6">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <p class="text-white/80 text-sm font-medium">Bugs Found (Month)</p>
                                <h3 class="text-3xl font-bold mt-2" id="total-bugs">0</h3>
                            </div>
                            <i data-lucide="bug" width="32" height="32" class="text-white/60"></i>
                        </div>
                    </div>
                    
                    <div class="card stat-card-blue p-6">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <p class="text-white/80 text-sm font-medium">Avg Attendance</p>
                                <h3 class="text-3xl font-bold mt-2" id="avg-attendance">0%</h3>
                            </div>
                            <i data-lucide="calendar" width="32" height="32" class="text-white/60"></i>
                        </div>
                    </div>
                </div>

                <!-- Team Members Quick View -->
                <div class="card p-6 mb-8">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-gray-900">Team Members</h3>
                        <button type="button" onclick="toggleSection('dashboard-team-members-content')" class="text-gray-600 hover:text-gray-900">
                            <i id="dashboard-team-members-content-icon" data-lucide="chevron-down" width="24" height="24"></i>
                        </button>
                    </div>
                    <div class="hidden" data-collapsible="dashboard-team-members-content">
                        <div id="team-members-list" class="space-y-3">
                            <p class="text-gray-500">No team members added yet. Go to Team Members section to add.</p>
                        </div>
                    </div>
                </div>

                <!-- Recent Performance Chart -->
                <div class="card p-6">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">Team Performance Trend</h3>
                    <canvas id="performanceChart" height="80"></canvas>
                </div>
            </div>

            <!-- Team Members Section -->
            <div id="team-members-section" class="section hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold text-gray-900">Team Members</h2>
                    <button onclick="showAddMemberModal()" class="btn-primary flex items-center space-x-2">
                        <i data-lucide="user-plus" width="18" height="18"></i>
                        <span>Add Member</span>
                    </button>
                </div>

                <div id="members-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Members will be dynamically added here -->
                </div>
            </div>

            <!-- Performance Metrics Section -->
            <div id="performance-section" class="section hidden">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Performance Metrics</h2>
                
                <div class="card p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-gray-900">Add Performance Data</h3>
                        <button type="button" onclick="toggleSection('add-performance-form')" class="text-gray-600 hover:text-gray-900">
                            <i id="add-performance-form-icon" data-lucide="chevron-down" width="24" height="24"></i>
                        </button>
                    </div>
                    <form id="performance-form" class="space-y-4 hidden" data-collapsible="add-performance-form">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Select Team Member <span class="text-red-500">*</span></label>
                                <select id="perf-member" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                                    <option value="">Choose a member...</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Project Name</label>
                                <input type="text" id="perf-project" placeholder="e.g., DSOT, DMB, CMUI" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Period Type <span class="text-red-500">*</span></label>
                                <select id="perf-period-type" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" onchange="updatePeriodInput()" required>
                                    <option value="daily">Daily</option>
                                    <option value="weekly">Weekly (Date Range)</option>
                                    <option value="monthly" selected>Monthly</option>
                                </select>
                            </div>
                            <div id="period-input-container">
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <span id="period-label">Month</span> <span class="text-red-500">*</span>
                                </label>
                                <input type="month" id="perf-period" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Test Cases Created</label>
                                <input type="number" id="perf-tests-created" min="0" value="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Test Cases Executed</label>
                                <input type="number" id="perf-tests-executed" min="0" value="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Defects Reported</label>
                                <input type="number" id="perf-defects-reported" min="0" value="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Asana Tickets</label>
                                <input type="number" id="perf-asana-tickets" min="0" value="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            </div>
                        </div>

                        <button type="submit" class="btn-primary">Save Performance Data</button>
                    </form>
                </div>

                <div class="card p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-gray-900">Performance History</h3>
                        <div class="flex items-center space-x-2">
                            <button onclick="togglePerformanceFilters()" class="btn-secondary text-sm flex items-center">
                                <i data-lucide="filter" width="16" height="16" class="mr-2"></i>
                                Filters
                            </button>
                            <button type="button" onclick="toggleSection('performance-history-content')" class="text-gray-600 hover:text-gray-900">
                                <i id="performance-history-content-icon" data-lucide="chevron-down" width="24" height="24"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Collapse/Expand Content -->
                    <div class="hidden" data-collapsible="performance-history-content">
                    
                    <!-- Filters Panel -->
                    <div id="performance-filters" class="hidden mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                            <!-- Team Member Filter -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Team Member</label>
                                <select id="filter-member" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm" onchange="applyPerformanceFilters()">
                                    <option value="">All Members</option>
                                </select>
                            </div>
                            
                            <!-- Project Filter -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Project</label>
                                <select id="filter-project" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm" onchange="applyPerformanceFilters()">
                                    <option value="">All Projects</option>
                                </select>
                            </div>
                            
                            <!-- Period Type Filter -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Period Type</label>
                                <select id="filter-period-type" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm" onchange="applyPerformanceFilters()">
                                    <option value="">All Types</option>
                                    <option value="daily">Daily</option>
                                    <option value="weekly">Weekly</option>
                                    <option value="monthly">Monthly</option>
                                </select>
                            </div>
                            
                            <!-- Date From Filter -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Date From</label>
                                <input type="date" id="filter-date-from" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm" onchange="applyPerformanceFilters()">
                            </div>
                            
                            <!-- Date To Filter -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Date To</label>
                                <input type="date" id="filter-date-to" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm" onchange="applyPerformanceFilters()">
                            </div>
                            
                            <!-- Min Test Cases Created -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Min TC Created</label>
                                <input type="number" id="filter-min-tc-created" min="0" placeholder="Min" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm" onchange="applyPerformanceFilters()">
                            </div>
                            
                            <!-- Min Test Cases Executed -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Min TC Executed</label>
                                <input type="number" id="filter-min-tc-executed" min="0" placeholder="Min" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm" onchange="applyPerformanceFilters()">
                            </div>
                            
                            <!-- Min Defects -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Min Defects</label>
                                <input type="number" id="filter-min-defects" min="0" placeholder="Min" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm" onchange="applyPerformanceFilters()">
                            </div>
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <div class="text-sm text-gray-600">
                                <span id="filter-results-count">Showing all records</span>
                            </div>
                            <button onclick="clearPerformanceFilters()" class="btn-secondary text-sm">
                                <i data-lucide="x" width="16" height="16" class="inline mr-1"></i>
                                Clear Filters
                            </button>
                        </div>
                    </div>
                    
                    <!-- Pagination Controls -->
                    <div class="flex justify-between items-center mb-4">
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-600">Show:</span>
                            <select id="performance-page-size" onchange="changePerformancePageSize()" class="px-3 py-1 border border-gray-300 rounded-lg text-sm">
                                <option value="5">5</option>
                                <option value="10" selected>10</option>
                                <option value="25">25</option>
                                <option value="50">50</option>
                                <option value="100">100</option>
                            </select>
                            <span class="text-sm text-gray-600">entries</span>
                        </div>
                        <div class="text-sm text-gray-600">
                            <span id="performance-page-info">Showing 0 of 0 entries</span>
                        </div>
                    </div>
                    
                    <div id="performance-history" class="overflow-x-auto mb-4">
                        <table class="min-w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Member</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Project</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Period</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Date/Week/Month</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">TC Created</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">TC Executed</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Defects</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Asana</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="performance-table-body" class="bg-white divide-y divide-gray-200">
                                <tr>
                                    <td colspan="9" class="px-6 py-4 text-center text-gray-500">No performance data available</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Pagination Buttons -->
                    <div id="performance-pagination" class="flex justify-center space-x-2">
                        <!-- Pagination buttons will be added here -->
                    </div>
                    
                    </div><!-- End collapsible content -->
                </div>
            </div>

            <!-- Attendance Section -->
            <div id="attendance-section" class="section hidden">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Attendance Tracking</h2>
                
                <!-- Attendance Mode Tabs -->
                <div class="mb-6 border-b border-gray-200">
                    <nav class="flex space-x-8">
                        <button onclick="switchAttendanceMode('single')" id="single-mode-tab" class="attendance-tab active py-4 px-1 border-b-2 border-indigo-500 font-medium text-sm text-indigo-600">
                            Single Day
                        </button>
                        <button onclick="switchAttendanceMode('bulk')" id="bulk-mode-tab" class="attendance-tab py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">
                            Bulk Marking
                        </button>
                    </nav>
                </div>

                <!-- Single Day Attendance Form -->
                <div id="single-attendance-form" class="card p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-gray-900">Mark Attendance (Single Day)</h3>
                        <button type="button" onclick="toggleSection('single-attendance-content')" class="text-gray-600 hover:text-gray-900">
                            <i id="single-attendance-content-icon" data-lucide="chevron-down" width="24" height="24"></i>
                        </button>
                    </div>
                    <form id="attendance-form" class="space-y-4 hidden" data-collapsible="single-attendance-content">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Select Team Member</label>
                                <select id="att-member" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                                    <option value="">Choose a member...</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Date</label>
                                <input type="date" id="att-date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                                <select id="att-status" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                                    <option value="available">Available</option>
                                    <option value="pto-full">PTO - Full Day</option>
                                    <option value="pto-first-half">PTO - First Half</option>
                                    <option value="pto-second-half">PTO - Second Half</option>
                                    <option value="lwp-full">LWP - Full Day</option>
                                    <option value="lwp-first-half">LWP - First Half</option>
                                    <option value="lwp-second-half">LWP - Second Half</option>
                                    <option value="pl-full">PL - Full Day</option>
                                    <option value="co-full">CO - Full Day</option>
                                    <option value="holiday">Holiday</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Notes (Optional)</label>
                            <input type="text" id="att-notes" placeholder="e.g., Sick leave, Client meeting, etc." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        </div>
                        <button type="submit" class="btn-primary">Save Attendance</button>
                    </form>
                </div>

                <!-- Bulk Attendance Form -->
                <div id="bulk-attendance-form" class="card p-6 mb-6 hidden">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <h3 class="text-xl font-bold text-gray-900">Bulk Mark Attendance</h3>
                            <p class="text-xs text-gray-500">
                                <i data-lucide="info" width="14" height="14" class="inline"></i>
                                Weekends (Sat & Sun) are automatically excluded
                            </p>
                        </div>
                        <button type="button" onclick="toggleSection('bulk-attendance-content')" class="text-gray-600 hover:text-gray-900">
                            <i id="bulk-attendance-content-icon" data-lucide="chevron-down" width="24" height="24"></i>
                        </button>
                    </div>
                    <form id="bulk-attendance-form-element" class="space-y-4 hidden" data-collapsible="bulk-attendance-content">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Select Team Members</label>
                                <div class="border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto">
                                    <label class="flex items-center mb-2">
                                        <input type="checkbox" id="select-all-members" onchange="toggleAllMembers()" class="mr-2 rounded">
                                        <span class="font-medium">Select All</span>
                                    </label>
                                    <hr class="mb-2">
                                    <div id="bulk-members-list">
                                        <!-- Member checkboxes will be added here -->
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Period Type</label>
                                <select id="bulk-period-type" onchange="updateBulkPeriodInput()" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                                    <option value="multiple">Multiple Days</option>
                                    <option value="week">Week Range</option>
                                    <option value="month">Entire Month</option>
                                </select>
                            </div>
                        </div>

                        <div id="bulk-period-container">
                            <!-- Period inputs will be dynamically added here -->
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                                <select id="bulk-status" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                                    <option value="available">Available</option>
                                    <option value="pto-full">PTO - Full Day</option>
                                    <option value="pto-first-half">PTO - First Half</option>
                                    <option value="pto-second-half">PTO - Second Half</option>
                                    <option value="lwp-full">LWP - Full Day</option>
                                    <option value="lwp-first-half">LWP - First Half</option>
                                    <option value="lwp-second-half">LWP - Second Half</option>
                                    <option value="pl-full">PL - Full Day</option>
                                    <option value="co-full">CO - Full Day</option>
                                    <option value="holiday">Holiday</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Notes (Optional)</label>
                                <input type="text" id="bulk-notes" placeholder="e.g., Team outing, Holiday, etc." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            </div>
                        </div>

                        <div class="flex items-center space-x-4">
                            <button type="submit" class="btn-primary">Mark Attendance</button>
                            <span id="bulk-preview" class="text-sm text-gray-600"></span>
                        </div>
                    </form>
                </div>

                <!-- Attendance Calendar View -->
                <div class="card p-6 mb-6">
                    <div class="flex flex-col md:flex-row items-start md:items-center justify-between mb-4 gap-3">
                        <div class="flex items-center space-x-2">
                            <label class="text-sm font-medium text-gray-700">Filter by Member:</label>
                            <select id="calendar-member-filter" onchange="renderAttendanceCalendar()" class="px-3 py-2 border border-gray-300 rounded-lg text-sm">
                                <option value="">All Members</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <label class="text-sm font-medium text-gray-700">View:</label>
                            <select id="calendar-view-type" onchange="changeCalendarViewType()" class="px-3 py-2 border border-gray-300 rounded-lg text-sm font-semibold bg-indigo-50 text-indigo-700">
                                <option value="month">Monthly</option>
                                <option value="year">Yearly</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-4">
                            <div class="flex items-center space-x-2" id="month-navigation">
                                <button onclick="changeCalendarMonth(-1)" class="p-2 hover:bg-gray-100 rounded-lg" title="Previous Month">
                                    <i data-lucide="chevron-left" width="20" height="20"></i>
                                </button>
                                <div class="flex items-center space-x-2">
                                    <select id="calendar-month-select" onchange="changeCalendarToSelected()" class="px-3 py-2 border border-gray-300 rounded-lg text-sm font-semibold">
                                        <option value="0">January</option>
                                        <option value="1">February</option>
                                        <option value="2">March</option>
                                        <option value="3">April</option>
                                        <option value="4">May</option>
                                        <option value="5">June</option>
                                        <option value="6">July</option>
                                        <option value="7">August</option>
                                        <option value="8">September</option>
                                        <option value="9">October</option>
                                        <option value="10">November</option>
                                        <option value="11">December</option>
                                    </select>
                                    <select id="calendar-year-select" onchange="changeCalendarToSelected()" class="px-3 py-2 border border-gray-300 rounded-lg text-sm font-semibold">
                                        <!-- Years will be populated by JavaScript -->
                                    </select>
                                </div>
                                <button onclick="changeCalendarMonth(1)" class="p-2 hover:bg-gray-100 rounded-lg" title="Next Month">
                                    <i data-lucide="chevron-right" width="20" height="20"></i>
                                </button>
                            </div>
                            <div class="flex items-center space-x-2 hidden" id="year-navigation">
                                <button onclick="changeCalendarYear(-1)" class="p-2 hover:bg-gray-100 rounded-lg" title="Previous Year">
                                    <i data-lucide="chevron-left" width="20" height="20"></i>
                                </button>
                                <select id="calendar-year-select-yearly" onchange="changeCalendarToSelectedYear()" class="px-3 py-2 border border-gray-300 rounded-lg text-sm font-semibold">
                                    <!-- Years will be populated by JavaScript -->
                                </select>
                                <button onclick="changeCalendarYear(1)" class="p-2 hover:bg-gray-100 rounded-lg" title="Next Year">
                                    <i data-lucide="chevron-right" width="20" height="20"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4">
                        <!-- Calendar -->
                        <div id="attendance-calendar" class="lg:col-span-3">
                            <!-- Calendar will be rendered here -->
                        </div>
                        
                        <!-- Quick Leave Summary -->
                        <div class="lg:col-span-1">
                            <div class="card p-4 sticky top-4">
                                <h4 class="text-sm font-bold text-gray-900 mb-3 flex items-center">
                                    <i data-lucide="calendar-days" width="16" height="16" class="mr-2"></i>
                                    Leave Summary
                                </h4>
                                <div id="quick-leave-summary" class="space-y-2 text-xs max-h-96 overflow-y-auto">
                                    <!-- Leave summary will be rendered here -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex flex-wrap gap-4 text-sm">
                        <div class="flex items-center space-x-2">
                            <div class="w-4 h-4 rounded-full bg-cyan-400"></div>
                            <span>Today</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-4 h-4 rounded-full bg-green-300"></div>
                            <span>Available</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-4 h-4 rounded-full bg-blue-300"></div>
                            <span>PTO (Full)</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-4 h-4 rounded-full bg-blue-200"></div>
                            <span>PTO (Half)</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-4 h-4 rounded-full bg-orange-300"></div>
                            <span>LWP (Full)</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-4 h-4 rounded-full bg-orange-200"></div>
                            <span>LWP (Half)</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-4 h-4 rounded-full bg-purple-300"></div>
                            <span>PL</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-4 h-4 rounded-full bg-teal-300"></div>
                            <span>CO</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-4 h-4 rounded-full bg-gray-200 border-2 border-gray-400"></div>
                            <span>Weekend</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-4 h-4 rounded-full bg-yellow-100 border-2 border-yellow-500"></div>
                            <span>Holiday</span>
                        </div>
                    </div>
                </div>

                <!-- Bulk Edit Attendance -->
                <div class="card p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-gray-900">Bulk Edit Attendance</h3>
                        <button type="button" onclick="toggleSection('bulk-edit-attendance-content')" class="text-gray-600 hover:text-gray-900">
                            <i id="bulk-edit-attendance-content-icon" data-lucide="chevron-down" width="24" height="24"></i>
                        </button>
                    </div>
                    <form id="bulk-edit-attendance-form" class="space-y-4 hidden" data-collapsible="bulk-edit-attendance-content">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <div class="flex items-center justify-between mb-2">
                                    <label class="block text-sm font-medium text-gray-700">Select Members</label>
                                    <button type="button" onclick="toggleAllBulkEditMembers()" class="text-xs text-indigo-600 hover:text-indigo-800">
                                        Select All / None
                                    </button>
                                </div>
                                <div id="bulk-edit-members-list" class="space-y-2 max-h-48 overflow-y-auto border border-gray-300 rounded-lg p-3">
                                    <!-- Member checkboxes will be populated here -->
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Date Range</label>
                                <div class="space-y-2">
                                    <input type="date" id="bulk-edit-start-date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                                    <span class="text-xs text-gray-500">to</span>
                                    <input type="date" id="bulk-edit-end-date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                                </div>
                                <p class="text-xs text-gray-500 mt-2">
                                    <i data-lucide="info" width="14" height="14" class="inline"></i>
                                    Weekends (Sat & Sun) are automatically excluded
                                </p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">New Status</label>
                                <select id="bulk-edit-status" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                                    <option value="available">Available</option>
                                    <option value="pto-full">PTO - Full Day</option>
                                    <option value="pto-first-half">PTO - First Half</option>
                                    <option value="pto-second-half">PTO - Second Half</option>
                                    <option value="lwp-full">LWP - Full Day</option>
                                    <option value="lwp-first-half">LWP - First Half</option>
                                    <option value="lwp-second-half">LWP - Second Half</option>
                                    <option value="pl-full">PL - Full Day</option>
                                    <option value="co-full">CO - Full Day</option>
                                    <option value="holiday">Holiday</option>
                                </select>
                                <label class="block text-sm font-medium text-gray-700 mb-2 mt-3">Notes (Optional)</label>
                                <input type="text" id="bulk-edit-notes" placeholder="e.g., Bulk updated" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <div id="bulk-edit-preview" class="text-sm text-gray-600"></div>
                            <button type="submit" class="btn-primary">Update Attendance</button>
                        </div>
                    </form>
                </div>

                <div class="card p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-gray-900">Attendance Summary</h3>
                        <button type="button" onclick="toggleSection('attendance-logs-content')" class="text-gray-600 hover:text-gray-900">
                            <i id="attendance-logs-content-icon" data-lucide="chevron-down" width="24" height="24"></i>
                        </button>
                    </div>
                    <div class="hidden" data-collapsible="attendance-logs-content">
                        <div id="attendance-summary" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <!-- Summary cards will be added here -->
                        </div>
                        
                        <!-- Pagination Controls -->
                        <div class="flex justify-between items-center mb-4">
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-gray-600">Show:</span>
                                <select id="attendance-page-size" onchange="changeAttendancePageSize()" class="px-3 py-1 border border-gray-300 rounded-lg text-sm">
                                    <option value="5">5</option>
                                    <option value="10" selected>10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                                <span class="text-sm text-gray-600">entries</span>
                            </div>
                            <div class="text-sm text-gray-600">
                                <span id="attendance-page-info">Showing 0 of 0 entries</span>
                            </div>
                        </div>
                        
                        <div id="attendance-history" class="overflow-x-auto mb-4">
                            <table class="min-w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Member</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Date</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Notes</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="attendance-table-body" class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td colspan="5" class="px-6 py-4 text-center text-gray-500">No attendance records available</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Pagination Buttons -->
                        <div id="attendance-pagination" class="flex justify-center space-x-2">
                            <!-- Pagination buttons will be added here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Holidays & Weekends Section -->
            <div id="holidays-section" class="section hidden">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Holidays & Weekends Management</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <!-- Weekend Settings -->
                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4">Weekend Configuration</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="flex items-center space-x-3 mb-2">
                                    <input type="checkbox" id="exclude-weekends" checked class="rounded">
                                    <span class="font-medium">Exclude weekends from attendance calculations</span>
                                </label>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Select Weekend Days</label>
                                <div class="space-y-2">
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" value="0" class="weekend-day rounded" checked>
                                        <span>Sunday</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" value="1" class="weekend-day rounded">
                                        <span>Monday</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" value="2" class="weekend-day rounded">
                                        <span>Tuesday</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" value="3" class="weekend-day rounded">
                                        <span>Wednesday</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" value="4" class="weekend-day rounded">
                                        <span>Thursday</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" value="5" class="weekend-day rounded">
                                        <span>Friday</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" value="6" class="weekend-day rounded" checked>
                                        <span>Saturday</span>
                                    </label>
                                </div>
                            </div>
                            <button type="button" onclick="saveWeekendSettings()" class="btn-primary w-full">Save Weekend Settings</button>
                        </div>
                    </div>

                    <!-- Add Holiday -->
                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4">Add Holiday</h3>
                        <form id="add-holiday-form" class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Holiday Name</label>
                                <input type="text" id="holiday-name" placeholder="e.g., Diwali, Christmas" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Date</label>
                                <input type="date" id="holiday-date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Type</label>
                                <select id="holiday-type" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                                    <option value="public">Public Holiday</option>
                                    <option value="company">Company Holiday</option>
                                    <option value="optional">Optional Holiday</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Description (Optional)</label>
                                <textarea id="holiday-description" rows="2" placeholder="Additional details..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"></textarea>
                            </div>
                            <button type="submit" class="btn-primary w-full">Add Holiday</button>
                        </form>
                    </div>
                </div>

                <!-- Holidays List -->
                <div class="card p-6">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">Holidays List</h3>
                    <div id="holidays-list" class="space-y-3">
                        <!-- Holidays will be rendered here -->
                    </div>
                </div>
            </div>

            <!-- Appraisal Section -->
            <div id="appraisal-section" class="section hidden">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Appraisal Management</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4">Set Goals</h3>
                        <form id="goals-form" class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Select Team Member</label>
                                <select id="goal-member" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                                    <option value="">Choose a member...</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Goal Title</label>
                                <input type="text" id="goal-title" placeholder="e.g., Improve automation coverage" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Target Date</label>
                                <input type="date" id="goal-date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                                <textarea id="goal-description" rows="3" placeholder="Describe the goal..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required></textarea>
                            </div>
                            <button type="submit" class="btn-primary w-full">Add Goal</button>
                        </form>
                    </div>

                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4">Performance Rating</h3>
                        <form id="rating-form" class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Select Team Member</label>
                                <select id="rating-member" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                                    <option value="">Choose a member...</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Review Period</label>
                                <select id="rating-period" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                                    <option value="Q1">Q1 (Jan-Mar)</option>
                                    <option value="Q2">Q2 (Apr-Jun)</option>
                                    <option value="Q3">Q3 (Jul-Sep)</option>
                                    <option value="Q4">Q4 (Oct-Dec)</option>
                                    <option value="Annual">Annual</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Overall Rating</label>
                                <select id="rating-score" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                                    <option value="5">5 - Outstanding</option>
                                    <option value="4">4 - Exceeds Expectations</option>
                                    <option value="3">3 - Meets Expectations</option>
                                    <option value="2">2 - Needs Improvement</option>
                                    <option value="1">1 - Unsatisfactory</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Strengths</label>
                                <textarea id="rating-strengths" rows="2" placeholder="Key strengths..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Areas for Improvement</label>
                                <textarea id="rating-improvements" rows="2" placeholder="Areas to improve..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required></textarea>
                            </div>
                            <button type="submit" class="btn-primary w-full">Save Rating</button>
                        </form>
                    </div>
                </div>

                <div class="card p-6">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">Appraisal History</h3>
                    <div id="appraisal-history">
                        <p class="text-gray-500">No appraisal data available</p>
                    </div>
                </div>
            </div>

            <!-- Analytics Section -->
            <div id="analytics-section" class="section hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold text-gray-900">Team Analytics</h2>
                    
                    <!-- Date Filter -->
                    <div class="flex items-center space-x-4 bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                        <div class="flex items-center space-x-2">
                            <i data-lucide="calendar" width="20" height="20" class="text-gray-600"></i>
                            <label class="text-sm font-medium text-gray-700">Date Range:</label>
                        </div>
                        <select id="analytics-date-preset" onchange="applyAnalyticsDateFilter()" class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500">
                            <option value="all">All Time</option>
                            <option value="7">Last 7 Days</option>
                            <option value="30" selected>Last 30 Days</option>
                            <option value="90">Last 90 Days</option>
                            <option value="180">Last 6 Months</option>
                            <option value="365">Last Year</option>
                            <option value="custom">Custom Range</option>
                        </select>
                        <div id="analytics-custom-dates" class="items-center space-x-2" style="display: none;">
                            <input type="date" id="analytics-date-from" class="px-3 py-2 border border-gray-300 rounded-lg text-sm" onchange="applyAnalyticsDateFilter()">
                            <span class="text-gray-500">to</span>
                            <input type="date" id="analytics-date-to" class="px-3 py-2 border border-gray-300 rounded-lg text-sm" onchange="applyAnalyticsDateFilter()">
                        </div>
                        <button onclick="clearAnalyticsDateFilter()" class="text-sm text-gray-600 hover:text-gray-900 px-3 py-2 hover:bg-gray-100 rounded-lg">
                            <i data-lucide="x" width="16" height="16" class="inline"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Analytics KPI Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                    <div class="card stat-card p-6">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <p class="text-white/80 text-sm font-medium flex items-center gap-1">
                                    Total Test Cases
                                    <span class="info-tooltip" data-tooltip="Sum of all Test Cases Created in selected date range">
                                        <i data-lucide="info" width="14" height="14" class="text-white/60"></i>
                                    </span>
                                </p>
                                <h3 class="text-3xl font-bold mt-2" id="analytics-total-tc">0</h3>
                                <p class="text-white/70 text-xs mt-1" id="analytics-tc-trend">No data</p>
                            </div>
                            <i data-lucide="file-check" width="32" height="32" class="text-white/60"></i>
                        </div>
                    </div>
                    
                    <div class="card stat-card-green p-6">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <p class="text-white/80 text-sm font-medium flex items-center gap-1">
                                    Avg Execution Rate
                                    <span class="info-tooltip" data-tooltip="Formula: (Total TC Executed / Total TC Created) Ã— 100%">
                                        <i data-lucide="info" width="14" height="14" class="text-white/60"></i>
                                    </span>
                                </p>
                                <h3 class="text-3xl font-bold mt-2" id="analytics-exec-rate">0%</h3>
                                <p class="text-white/70 text-xs mt-1" id="analytics-exec-trend">No data</p>
                            </div>
                            <i data-lucide="trending-up" width="32" height="32" class="text-white/60"></i>
                        </div>
                    </div>
                    
                    <div class="card stat-card-orange p-6">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <p class="text-white/80 text-sm font-medium flex items-center gap-1">
                                    Total Defects
                                    <span class="info-tooltip" data-tooltip="Sum of all Defects Reported in selected date range">
                                        <i data-lucide="info" width="14" height="14" class="text-white/60"></i>
                                    </span>
                                </p>
                                <h3 class="text-3xl font-bold mt-2" id="analytics-total-defects">0</h3>
                                <p class="text-white/70 text-xs mt-1" id="analytics-defects-trend">No data</p>
                            </div>
                            <i data-lucide="bug" width="32" height="32" class="text-white/60"></i>
                        </div>
                    </div>
                    
                    <div class="card stat-card-blue p-6">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <p class="text-white/80 text-sm font-medium flex items-center gap-1">
                                    Active Projects
                                    <span class="info-tooltip" data-tooltip="Count of unique projects in selected date range">
                                        <i data-lucide="info" width="14" height="14" class="text-white/60"></i>
                                    </span>
                                </p>
                                <h3 class="text-3xl font-bold mt-2" id="analytics-active-projects">0</h3>
                                <p class="text-white/70 text-xs mt-1" id="analytics-projects-list">No projects</p>
                            </div>
                            <i data-lucide="folder" width="32" height="32" class="text-white/60"></i>
                        </div>
                    </div>
                </div>

                <!-- Top Performers -->
                <div class="card p-6 mb-6">
                    <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
                        Top Performers (As per Date range)
                        <span class="info-tooltip" data-tooltip="Score Formula: (TC Created Ã— 20%) + (TC Executed Ã— 40%) + (Defects Ã— 40%)">
                            <i data-lucide="info" width="18" height="18" class="text-gray-500"></i>
                        </span>
                    </h3>
                    <div id="top-performers-list" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <p class="text-gray-500">No performance data available</p>
                    </div>
                </div>

                <!-- Charts Row 1 -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4">Performance Trends (Last 6 Months)</h3>
                        <div style="height: 250px;">
                            <canvas id="testTrendsChart"></canvas>
                        </div>
                    </div>
                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4">Team Member TC Created vs. Executed Comparison</h3>
                        <div style="height: 250px;">
                            <canvas id="memberComparisonChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Charts Row 2 -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4">Project-wise Test Cases Distribution</h3>
                        <div style="height: 250px;">
                            <canvas id="projectTestCasesChart"></canvas>
                        </div>
                    </div>
                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4">Project-wise Test Execution Distribution</h3>
                        <div style="height: 250px;">
                            <canvas id="projectExecutionChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Charts Row 3 -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4">Test Cases Created vs Defects Found</h3>
                        <div style="height: 250px;">
                            <canvas id="testCasesVsDefectsChart"></canvas>
                        </div>
                    </div>
                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4">Test Execution vs Defects Found</h3>
                        <div style="height: 250px;">
                            <canvas id="executionVsDefectsChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Detailed Analytics Table -->
                <div class="card p-6">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">Member Performance Summary</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Member</th>
                                    <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase">
                                        <span class="inline-flex items-center gap-1.5">
                                            Total TC Created
                                            <span class="info-tooltip" data-tooltip="Sum of Test Cases Created" style="font-size: 14px; font-weight: bold; color: #4f46e5;">â“˜</span>
                                        </span>
                                    </th>
                                    <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase">
                                        <span class="inline-flex items-center gap-1.5">
                                            Total TC Executed
                                            <span class="info-tooltip" data-tooltip="Sum of Test Cases Executed" style="font-size: 14px; font-weight: bold; color: #4f46e5;">â“˜</span>
                                        </span>
                                    </th>
                                    <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase">
                                        <span class="inline-flex items-center gap-1.5">
                                            Total Defects
                                            <span class="info-tooltip" data-tooltip="Sum of Defects Reported" style="font-size: 14px; font-weight: bold; color: #4f46e5;">â“˜</span>
                                        </span>
                                    </th>
                                    <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase">
                                        <span class="inline-flex items-center gap-1.5">
                                            Avg per Month
                                            <span class="info-tooltip" data-tooltip="Formula: TC Executed / Number of Unique Months" style="font-size: 14px; font-weight: bold; color: #4f46e5;">â“˜</span>
                                        </span>
                                    </th>
                                    <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase">
                                        <span class="inline-flex items-center gap-1.5">
                                            Quality Score
                                            <span class="info-tooltip" data-tooltip="Formula: (Defects / TC Executed) Ã— 100%. Green (â‰¥10%) = Excellent, Yellow (5-9%) = Good, Red (<5%) = Needs Improvement" style="font-size: 14px; font-weight: bold; color: #4f46e5;">â“˜</span>
                                        </span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="analytics-member-summary" class="bg-white divide-y divide-gray-200">
                                <tr>
                                    <td colspan="6" class="px-6 py-4 text-center text-gray-500">No data available</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Member Modal -->
    <div id="add-member-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-900">Add Team Member</h3>
                <button onclick="closeAddMemberModal()" class="text-gray-400 hover:text-gray-600">
                    <i data-lucide="x" width="24" height="24"></i>
                </button>
            </div>
            <form id="add-member-form" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
                    <input type="text" id="member-name" placeholder="Enter full name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                    <input type="email" id="member-email" placeholder="email@example.com" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Role</label>
                    <select id="member-role" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                        <option value="QA Engineer">QA Engineer</option>
                        <option value="Senior QA Engineer">Senior QA Engineer</option>
                        <option value="Lead QA Engineer">Lead QA Engineer</option>
                        <option value="QA Automation Engineer">QA Automation Engineer</option>
                        <option value="QA Analyst">QA Analyst</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Joining Date</label>
                    <input type="date" id="member-joining" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                </div>
                <div class="flex space-x-3 pt-4">
                    <button type="submit" class="btn-primary flex-1">Add Member</button>
                    <button type="button" onclick="closeAddMemberModal()" class="btn-secondary flex-1">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Member Modal -->
    <div id="edit-member-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-900">Edit Team Member</h3>
                <button onclick="closeEditMemberModal()" class="text-gray-400 hover:text-gray-600">
                    <i data-lucide="x" width="24" height="24"></i>
                </button>
            </div>
            <form id="edit-member-form" class="space-y-4">
                <input type="hidden" id="edit-member-id">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
                    <input type="text" id="edit-member-name" placeholder="Enter full name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                    <input type="email" id="edit-member-email" placeholder="email@example.com" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Role</label>
                    <select id="edit-member-role" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                        <option value="QA Engineer">QA Engineer</option>
                        <option value="Senior QA Engineer">Senior QA Engineer</option>
                        <option value="Lead QA Engineer">Lead QA Engineer</option>
                        <option value="QA Automation Engineer">QA Automation Engineer</option>
                        <option value="QA Analyst">QA Analyst</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Joining Date</label>
                    <input type="date" id="edit-member-joining" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                </div>
                <div class="flex space-x-3 pt-4">
                    <button type="submit" class="btn-primary flex-1">Update Member</button>
                    <button type="button" onclick="closeEditMemberModal()" class="btn-secondary flex-1">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Day Attendance Details Modal -->
    <div id="day-attendance-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 id="day-attendance-title" class="text-2xl font-bold text-gray-900">Attendance Details</h3>
                <button onclick="closeDayAttendanceModal()" class="text-gray-400 hover:text-gray-600">
                    <i data-lucide="x" width="24" height="24"></i>
                </button>
            </div>
            <div id="day-attendance-content" class="space-y-3">
                <!-- Attendance records will be added here -->
            </div>
        </div>
    </div>

    <!-- Edit Attendance Modal -->
    <div id="edit-attendance-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-900">Edit Attendance</h3>
                <button onclick="closeEditAttendanceModal()" class="text-gray-400 hover:text-gray-600">
                    <i data-lucide="x" width="24" height="24"></i>
                </button>
            </div>
            <form id="edit-attendance-form" class="space-y-4">
                <input type="hidden" id="edit-att-id">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Team Member</label>
                    <select id="edit-att-member" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                        <option value="">Choose a member...</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Date</label>
                    <input type="date" id="edit-att-date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                    <select id="edit-att-status" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                        <option value="available">Available</option>
                        <option value="pto-full">PTO - Full Day</option>
                        <option value="pto-first-half">PTO - First Half</option>
                        <option value="pto-second-half">PTO - Second Half</option>
                        <option value="lwp-full">LWP - Full Day</option>
                        <option value="lwp-first-half">LWP - First Half</option>
                        <option value="lwp-second-half">LWP - Second Half</option>
                        <option value="pl-full">PL - Full Day</option>
                        <option value="co-full">CO - Full Day</option>
                        <option value="holiday">Holiday</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Notes (Optional)</label>
                    <input type="text" id="edit-att-notes" placeholder="e.g., Sick leave, Client meeting, etc." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                </div>
                <div class="flex space-x-3 pt-4">
                    <button type="submit" class="btn-primary flex-1">Update Attendance</button>
                    <button type="button" onclick="closeEditAttendanceModal()" class="btn-secondary flex-1">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Performance Modal -->
    <div id="edit-performance-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-900">Edit Performance Data</h3>
                <button onclick="closeEditPerformanceModal()" class="text-gray-400 hover:text-gray-600">
                    <i data-lucide="x" width="24" height="24"></i>
                </button>
            </div>
            <form id="edit-performance-form" class="space-y-4">
                <input type="hidden" id="edit-perf-id">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Team Member</label>
                        <select id="edit-perf-member" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" required>
                            <option value="">Choose a member...</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Project Name</label>
                        <input type="text" id="edit-perf-project" placeholder="e.g., DSOT, DMB, CMUI" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Period Type</label>
                        <select id="edit-perf-period-type" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" onchange="updateEditPeriodInput()" required>
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly (Date Range)</option>
                            <option value="monthly">Monthly</option>
                        </select>
                    </div>
                    <div id="edit-period-input-container">
                        <!-- Dynamic period input -->
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Test Cases Created</label>
                        <input type="number" id="edit-perf-tests-created" min="0" value="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Test Cases Executed</label>
                        <input type="number" id="edit-perf-tests-executed" min="0" value="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Defects Reported</label>
                        <input type="number" id="edit-perf-defects-reported" min="0" value="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Asana Tickets</label>
                        <input type="number" id="edit-perf-asana-tickets" min="0" value="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                </div>
                <div class="flex space-x-3 pt-4">
                    <button type="submit" class="btn-primary flex-1">Update Performance</button>
                    <button type="button" onclick="closeEditPerformanceModal()" class="btn-secondary flex-1">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Hidden file inputs for import -->
    <input type="file" id="import-file-input" accept=".json,.csv,.xlsx,.xls" style="position: absolute; left: -9999px; width: 1px; height: 1px; opacity: 0;">

    <!-- Export Menu Modal -->
    <div id="export-menu-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-900">Export Data</h3>
                <button onclick="closeExportMenu()" class="text-gray-400 hover:text-gray-600">
                    <i data-lucide="x" width="24" height="24"></i>
                </button>
            </div>
            <div class="space-y-3">
                <button onclick="exportAsJSON()" class="w-full btn-primary text-left flex items-center justify-between">
                    <span>Export as JSON</span>
                    <i data-lucide="file-json" width="20" height="20"></i>
                </button>
                <button onclick="exportAsCSV('members')" class="w-full btn-secondary text-left flex items-center justify-between">
                    <span>Export Team Members CSV</span>
                    <i data-lucide="users" width="20" height="20"></i>
                </button>
                <button onclick="exportAsCSV('performance')" class="w-full btn-secondary text-left flex items-center justify-between">
                    <span>Export Performance CSV</span>
                    <i data-lucide="trending-up" width="20" height="20"></i>
                </button>
                <button onclick="exportAsCSV('attendance')" class="w-full btn-secondary text-left flex items-center justify-between">
                    <span>Export Attendance CSV</span>
                    <i data-lucide="calendar-check" width="20" height="20"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Template Menu Modal -->
    <div id="template-menu-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-900">Download Templates</h3>
                <button onclick="closeTemplateMenu()" class="text-gray-400 hover:text-gray-600">
                    <i data-lucide="x" width="24" height="24"></i>
                </button>
            </div>
            <div class="space-y-3">
                <button onclick="downloadTemplate('members')" class="w-full btn-secondary text-left flex items-center justify-between">
                    <span>Team Members CSV Template</span>
                    <i data-lucide="users" width="20" height="20"></i>
                </button>
                <button onclick="downloadTemplate('performance')" class="w-full btn-secondary text-left flex items-center justify-between">
                    <span>Performance CSV Template</span>
                    <i data-lucide="trending-up" width="20" height="20"></i>
                </button>
                <button onclick="downloadTemplate('attendance')" class="w-full btn-secondary text-left flex items-center justify-between">
                    <span>Attendance CSV Template</span>
                    <i data-lucide="calendar-check" width="20" height="20"></i>
                </button>
            </div>
            <div class="mt-6 p-4 bg-green-50 rounded-lg">
                <p class="text-sm text-green-800">
                    <i data-lucide="info" width="16" height="16" class="inline mr-1"></i>
                    Download CSV templates to see the correct format for importing data.
                </p>
            </div>
        </div>
    </div>

    <!-- Import Menu Modal -->
    <div id="import-menu-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-900">Import Data</h3>
                <button onclick="closeImportMenu()" class="text-gray-400 hover:text-gray-600">
                    <i data-lucide="x" width="24" height="24"></i>
                </button>
            </div>
            <div class="space-y-3">
                <button onclick="importJSON()" class="w-full btn-primary text-left flex items-center justify-between">
                    <span>Import JSON (Full Data)</span>
                    <i data-lucide="file-json" width="20" height="20"></i>
                </button>
                <button onclick="importCSV('members')" class="w-full btn-secondary text-left flex items-center justify-between">
                    <span>Import Team Members CSV</span>
                    <i data-lucide="users" width="20" height="20"></i>
                </button>
                <button onclick="importCSV('performance')" class="w-full btn-secondary text-left flex items-center justify-between">
                    <span>Import Performance CSV</span>
                    <i data-lucide="trending-up" width="20" height="20"></i>
                </button>
                <button onclick="importCSV('attendance')" class="w-full btn-secondary text-left flex items-center justify-between">
                    <span>Import Attendance CSV</span>
                    <i data-lucide="calendar-check" width="20" height="20"></i>
                </button>
            </div>
            <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                <p class="text-sm text-blue-800">
                    <i data-lucide="info" width="16" height="16" class="inline mr-1"></i>
                    Need templates? Click the "Templates" button to download CSV templates.
                </p>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="app.js"></script>
    <script src="analytics.js"></script>
</body>
</html>
